<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Reaction Time Test Game</title>
    <link rel="icon" type="image/png" href="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FbbqJdy%2FbtszAY8E0nn%2F2ces7gFBw4k8siK5xJxOb0%2Fimg.png">
    
    <style>
        /* 전체 레이아웃 설정 */
        body {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            font-family: Arial, sans-serif;
        }

        h1 {
            font-size: 2em;
            text-align: center;
        }

        h3 {
            font-size: 1.2em;
            text-align: center;
        }

        p {
            font-size: 1em;
            color: red;
            text-align: center;
            margin-bottom: 20px;
        }

        /* 버튼 스타일 */
        button {
            font-size: 20px;
            padding: 15px 30px;
            cursor: pointer;
            border: none;
            background-color: #4CAF50;
            color: white;
            border-radius: 10px;
            transition: background-color 0.3s;
            margin-top: 20px;
        }

        button:hover {
            background-color: #45a049;
        }

        /* 원 스타일 */
        .circle {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background-color: black;
            margin: 10px;
            display: inline-block;
            opacity: 0.7;
            position: absolute;
        }

        .container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            width: 300px;
            height: 300px;
            position: relative;
        }

        /* 게임 결과 스타일 */
        #result {
            font-size: 1.2em;
            margin-top: 20px;
        }

        #backButton {
            display: none;
            font-size: 1.2em;
            margin-top: 20px;
        }

        #gameName {
            font-size: 0.8em;
            color: gray;
            text-align: center;
            margin-top: 10px;
        }

        /* 카운트다운 스타일 */
        #countdown {
            font-size: 2em;
            color: red;
            font-weight: bold;
        }
    </style>
</head>
<body>

<!-- 홈 아이콘 -->
<a href="index.html"><img src="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FbbqJdy%2FbtszAY8E0nn%2F2ces7gFBw4k8siK5xJxOb0%2Fimg.png" width="90px"></a>

<h1>Reaction Time Test Game</h1>
<h3><a href="https://goodstock18.tistory.com/m/entry/Bookmark-Collection">by.shp98</a></h3>
<hr>

<!-- 안내 문구 -->
<p>Click the red circle!</p>

<!-- 게임 시작 버튼 -->
<button onclick="startCountdown()">Start Game</button>

<!-- 카운트다운 표시 -->
<div id="countdown"></div>

<!-- 원을 표시하는 컨테이너 -->
<div class="container" id="circleContainer"></div>

<!-- 게임 결과 -->
<div id="result"></div>

<!-- 다시 도전하기 버튼 -->
<button id="backButton" onclick="restartGame()">Try Again</button>

<!-- 게임 이름 표시 -->
<div id="gameName">Reaction Time Test</div>

<script>
    let gameInterval;
    let currentRound = 0;
    const totalRounds = 10;  // 게임 진행 횟수
    let clickTimes = [];
    let startTime;
    let countdownValue = 5;
    let countdownInterval;
    let countdownElement = document.getElementById("countdown");
    let clickMissed = false;  // 클릭 실패 여부 확인

    function startCountdown() {
        if (countdownInterval) {
            clearInterval(countdownInterval);
        }

        countdownValue = 5;
        countdownElement.style.display = 'block';

        countdownInterval = setInterval(function() {
            countdownElement.textContent = countdownValue;
            countdownValue--;
            if (countdownValue < 0) {
                clearInterval(countdownInterval);
                countdownElement.style.display = 'none';
                startGame();
            }
        }, 1000);
    }

    function startGame() {
        currentRound = 0;
        clickTimes = [];
        clickMissed = false;
        document.getElementById("backButton").style.display = 'none';
        document.getElementById("result").innerHTML = '';
        generateCircles();
        showRandomCircle();
    }

    function generateCircles() {
        const container = document.getElementById("circleContainer");
        container.innerHTML = '';
        for (let i = 0; i < 9; i++) {
            let circle = document.createElement('div');
            circle.classList.add('circle');
            circle.addEventListener('click', handleClick);
            container.appendChild(circle);
        }
    }

    function showRandomCircle() {
        if (currentRound >= totalRounds) {
            endGame();
            return;
        }

        const circles = document.querySelectorAll('.circle');
        const randomIndex = Math.floor(Math.random() * circles.length);
        const randomCircle = circles[randomIndex];
        let circlePosition = getRandomPosition();

        randomCircle.style.left = circlePosition.x + 'px';
        randomCircle.style.top = circlePosition.y + 'px';
        
        randomCircle.style.backgroundColor = 'red';
        randomCircle.style.opacity = '1';

        startTime = Date.now();
        
        setTimeout(() => {
            if (!clickTimes[currentRound]) clickMissed = true;
            randomCircle.style.backgroundColor = 'black';
            randomCircle.style.opacity = '0.7';
            currentRound++;
            showRandomCircle();
        }, 1000);
    }

    function getRandomPosition() {
        const container = document.getElementById("circleContainer");
        const maxX = container.offsetWidth - 80;
        const maxY = container.offsetHeight - 80;

        let x = Math.floor(Math.random() * maxX);
        let y = Math.floor(Math.random() * maxY);

        return { x, y };
    }

    function handleClick(event) {
        const reactionTime = (Date.now() - startTime) / 1000;
        clickTimes[currentRound] = reactionTime;
    }

    function endGame() {
        if (clickMissed || clickTimes.length < totalRounds) {
            document.getElementById('result').innerHTML = `You failed to click the required circles.`;
        } else {
            let totalReactionTime = clickTimes.reduce((sum, time) => sum + time, 0);
            let averageTime = totalReactionTime / totalRounds;

            let tier = '';
            if (averageTime <= 0.058) {
                tier = 'Grand Master';
            } else if (averageTime <= 0.062) {
                tier = 'Master';
            } else if (averageTime <= 0.65) {
                tier = 'Diamond';
            } else if (averageTime <= 0.7) {
                tier = 'Platinum';
            } else if (averageTime <= 0.75) {
                tier = 'Gold';
            } else if (averageTime <= 0.8) {
                tier = 'Silver';
            } else {
                tier = 'Bronze';
            }

            document.getElementById('result').innerHTML = `Your average reaction time: ${averageTime.toFixed(6)}s<br>Your tier: ${tier}`;
        }

        document.getElementById('backButton').style.display = 'block';
    }

    function restartGame() {
        startCountdown();
    }
</script>

</body>
</html>
